mysql锁进行划分：

1、按照锁的粒度划分：行锁、表锁、页锁

2、按照锁的使用方式划分：共享锁、排它锁（悲观锁的一种实现）

3、还有两种思想上的锁：悲观锁、乐观锁。

4、InnoDB中有几种行级锁类型：Record Lock、Gap Lock、Next-key Lock

5、Record Lock：在索引记录上加锁

6、Gap Lock：间隙锁

7、Next-key Lock：Record Lock+Gap Lock

![数据库锁分类思维导图](..\resource\mysql锁.jpg)

##### InnoDB 存储引擎的锁算法

- Record Lock — 单个行记录上的锁；
- Gap Lock — 间隙锁，锁定一个范围，不包括记录本身；
- Next-Key Lock — 锁定一个范围，包括记录本身。



##### 共享锁

共享锁又称读锁 (read lock)，是读取操作创建的锁。

其他用户可以并发读取数据，但任何事务都不能对数据进行修改（获取数据上的排他锁），直到已释放所有共享锁。当如果事务对读锁进行修改操作，很可能会造成死锁。



##### 排它锁

排他锁 exclusive lock（也叫 writer lock）又称写锁。

若某个事物对某一行加上了排他锁，只能这个事务对其进行读写，在此事务结束之前，其他事务不能对其进行加任何锁，其他进程可以读取,不能进行写操作，需等待其释放。

排它锁是悲观锁的一种实现，在上面悲观锁也介绍过。

若事务 1 对数据对象 A 加上 X 锁，事务 1 可以读 A 也可以修改 A，其他事务不能再对 A 加任何锁，直到事物 1 释放 A 上的锁。这保证了其他事务在事物 1 释放 A 上的锁之前不能再读取和修改 A。排它锁会阻塞所有的排它锁和共享锁。