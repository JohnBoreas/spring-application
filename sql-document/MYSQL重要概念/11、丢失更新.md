场景：



1、提交覆盖，[**Read-Modify-Write 问题**](https://en.wikipedia.org/wiki/Read-modify-write)。一个典型的场景是并发对某个变量进行自增或自减

两个线程同时下单，很可能就会出现下面这样的情况：

1. 线程 A 获取库存值为 10；
2. 线程 B 获取库存值为 10；
3. 线程 A 需要买 5 个商品，校验通过，并下单；
4. 线程 B 需要买 5 个商品，校验通过，并下单；
5. 线程 A 下单完成，更新库存值为 10 - 5 = 5；
6. 线程 B 下单完成，更新库存值为 10 - 5 = 5；

两个线程下单结束后，商品的库存还剩 5 个，而实际上 10 个商品都已经卖光了。



2、回滚覆盖

和提交覆盖相对的，还有另一个 **丢失更新** 问题，叫做 **回滚覆盖**

![isolation-update-lost-1.png](..\resource\回滚覆盖.png)