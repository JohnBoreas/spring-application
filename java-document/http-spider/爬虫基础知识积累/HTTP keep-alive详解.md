一、keep-alive由来

建连接的过程需要消耗资源和时间，为了减少资源消耗，缩短响应时间，就需要重用连接。

HTTP/1.0中以及HTTP/1.1中，引入了重用连接的机制，就是在http请求头中加入Connection: keep-alive来告诉对方这个请求响应完成后不要关闭，下一次咱们还用这个请求继续交流。



二、各版本HTTP中使用

协议规定HTTP/1.0如果想要保持长连接，需要在请求头中加上Connection: keep-alive，

HTTP/1.1默认是支持长连接的，有没有这个请求头都行。



通过httpclient使用HTTP/1.0协议去请求tomcat时，即使带上Connection: keep-alive请求头也保持不了长连接。

如果HTTP/1.1版本的http请求报文不希望使用长连接，则要在请求头中加上Connection: close，接收到这个请求头的对端服务就会主动关闭连接。



三、http长连接会一直保持吗？

肯定是不会的。一般服务端都会设置keep-alive超时时间。超过指定的时间间隔，服务端就会主动关闭连接。

同时服务端还会设置一个参数叫最大请求数，比如当最大请求数是300时，只要请求次数超过300次，即使还没到超时时间，服务端也会主动关闭连接。

