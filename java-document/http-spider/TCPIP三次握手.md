1、在浏览器中输入一条网址

2、浏览器解析网址域名，拿到IP地址

```
通过一下方式查找域名ip
（1）浏览器缓存：ipconfig/displaydns 
（2）系统host：host
（3）路由器缓存
（4）本地DNS服务器
（5）根DNS服务器
最终获取IP返回浏览器
```

3、浏览器获取到端口号

4、浏览器向该IP端口发送一条连接请求

```
三次握手：keep-alive长连接
（1）客户端发送syn包到服务器，等待服务器确认
（2）服务器收到syn包，确认客户的syn，发送syn+ack包
（3）客户端收到syn+ack包，向服务器发送ack包，发送完成，客户端服务器进入TCP连接状态
```

5、浏览器向服务器发送报文

```
报文以流的形式通过TCP通道传输
TCP将流分割成数据块封装在IP分组里
一个TCP分组首部，一个IP分段首部，一个TCP数据块
```

6、浏览器从服务器中读取相应报文

7、浏览器关闭连接



**TCP标识位**

```
SYN(synchronous建立联机)
ACK(acknowledgement 确认) 
PSH(push传送) 
FIN(finish结束) 
RST(reset重置) 
URG(urgent紧急)
Sequence number(顺序号码) 
Acknowledge number(确认号码)
```



**ACK机制**

TCP协议中，服务器成功收到数据后，回复一个ACk包，表示已确认收到ACK号前面所有的数据

发送方一定时间内没有收到服务器的ACK确认包，回重新发送TCP数据包

保证了数据的可靠达到。

系统有一个固定的定时器每隔200ms会来检查是否需要发送ACK包。会有延迟



**TCP慢启动**

新连接不能一开始就大量发送数据包，根据网络情况逐步递增发送，cwnd初始一个最大报文段（MSS），每收到一个ACK确认包后，增大1MSS，避免路由器缓存空间耗尽，从而发生拥塞



**拥塞避免**

的主要思想是加法增大，cwnd开始以指数增加后面进入线性增加